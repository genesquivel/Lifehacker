window.headertag=window.headertag||{},function(){"use strict";var e={};e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.divIdToSlot=function(t){for(var n=e.getSlots(),i=0,r=n.length;r>i;i++)if(n[i].getSlotElementId()===t)return n[i];return null},e.getDivIdToSlotMap=function(t){t||(t=e.getSlots());for(var n={},i=0,r=t.length;r>i;i++)n[t[i].getSlotElementId()]=t[i];return n},e.getDivIds=function(t){t||(t=e.getSlots());for(var n=[],i=0,r=t.length;r>i;i++)n.push(t[i].getSlotElementId());return n},e.objToQueryString=function(e){var t="?";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t.slice(0,-1)},e.generateCorrelator=function(){return"_"+String((new Date).getTime()%2592e6)+String(Math.floor(16384*Math.random()))},e.generateUUID=function(){var e="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()%16|0;return t.toString(16)});return e},e.getSlots=function(){return window.googletag&&window.googletag.apiReady?googletag.pubads().getSlots().slice():null},e.isInteger=function(e){return"number"==typeof e&&e%1===0},e.validateNonEmptyString=function(e,t){return!!(t&&!e||e&&"string"==typeof e)},e.validateFunction=function(e,t){return!!(t&&!e||e&&"function"==typeof e)},e.validateNonEmptyArray=function(t,n){return!!(n&&!t||t&&e.isArray(t)&&t.length)},e.validateNonEmptyObject=function(t,n){return!!(n&&!t||t&&"object"==typeof t&&!e.isEmpty(t))},e.validateInteger=function(t,n,i,r){return!!(r&&"number"!=typeof t||"number"==typeof t&&e.isInteger(t)&&("number"==typeof n?t>=n:!0)&&("number"==typeof i?i>=t:!0))},e.validateBoolean=function(e,t){return!!(t&&"boolean"!=typeof e||"boolean"==typeof e)},e.isMobile=function(){return-1!==navigator.userAgent.indexOf("Mobi")},e.now=function(){return(new Date).getTime()},e.addScriptTag=function(e,t,n){var i=document.createElement("script");i.type="text/javascript",i.async=t,i.src=("https:"===document.location.protocol?"https:":"http:")+e,i.onload=n,i.readyState&&(i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,n())});var r=document.getElementsByTagName("script")[0];return r.parentNode.insertBefore(i,r),i},e.localStorageSupported=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},e.getProtocol=function(){return"https:"===document.location.protocol?"https:":"http:"},e.getPageUrl=function(){try{return window.top.location.href}catch(e){return window.location.href}},e.requiresDocumentOpen=function(){try{return-1===navigator.userAgent.toString().toLowerCase().indexOf("msie")}catch(e){return!0}},e.randomSplice=function(e){return e.length?e.splice(Math.floor(Math.random()*e.length),1)[0]:null},window.headertag.Utils=e}(),window.headertag.Utils.isMobile()?window.headertag.pagetype="mobile":window.headertag.pagetype="desktop",window.headertagconfig={siteId:999914,timeout:1e3,enableSingleRequest:!1,disableInitialLoad:!0,partners:{INDX:{targetingType:"slot",prefetch:{enabled:!0,info:{desktop:{requiredIndexSlots:["1","2","3","4","5"]},mobile:{requiredIndexSlots:["11","12"]}}}},RUBI:{targetingType:"slot",timeout:1e3,networkId:"12156",prefetch:{enabled:!1,info:{desktop:{divIds:["top","left"]},mobile:{divIds:["mobile"]}}},uniqueTargeting:"pos"},FB:{disabled:!0,timeout:1e3,debug:!0,appId:"743604429120938",targetingType:"slot",dynamicMapping:!0,uniqueTargeting:"pos",roundingBuckets:{type:2,buckets:[{range:[0,20],granularity:.05},{range:[20,50],granularity:1}]},adUnits:{desktop:[],mobile:[]},prefetch:{enabled:!1,info:{}}},AOL:{targetingType:"slot",timeout:1e3,region:"na",networkId:"10434.1",apiVersion:"3.0",targetingKey:"aolbid",roundingBuckets:{type:1,buckets:[{range:[0,20],granularity:.05},{range:[20,50],granularity:1}]}}}},/.*jezebel\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187399,window.headertagconfig.partners.RUBI.slots=[{siteId:"45534",zoneId:"200874",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45534",zoneId:"200874",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45534",zoneId:"505506",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606169120764"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606169120764"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606169120764"}],window.headertagconfig.partners.AOL.placements={3996402:["300x250_mobile"],3996401:["320x50_mobile"],3996403:["300x250_mobile_bottom"],3996400:["320x50_mobile_bottom"],4267104:["300x250_mobile_inpost"],4267103:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996402,3996401]}}}):(window.headertagconfig.siteId=187389,window.headertagconfig.partners.RUBI.slots=[{siteId:"45532",zoneId:"200870",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45532",zoneId:"200870",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45532",zoneId:"200870",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45532",zoneId:"200870",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45532",zoneId:"200870",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3946298:["728x90_top"],3946299:["300x250_left"],3946301:["300x250_left_dynamic"],3946300:["728x90_bottom"],4103348:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3946298,3946299]}}})),/.*gizmodo\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187287,window.headertagconfig.partners.RUBI.slots=[{siteId:"45530",zoneId:"200862",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45530",zoneId:"200862",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45530",zoneId:"505450",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606079120773"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606079120773"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606079120773"}],window.headertagconfig.partners.AOL.placements={3996392:["300x250_mobile"],3996393:["320x50_mobile"],3996390:["300x250_mobile_bottom"],3996391:["320x50_mobile_bottom"],4267093:["300x250_mobile_inpost"],4267092:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996392,3996393]}}}):(window.headertagconfig.siteId=187277,window.headertagconfig.partners.RUBI.slots=[{siteId:"45528",zoneId:"200858",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45528",zoneId:"200858",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45528",zoneId:"200858",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45528",zoneId:"200858",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45528",zoneId:"200858",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3946287:["728x90_top"],3946289:["300x250_left"],3946290:["300x250_left_dynamic"],3946288:["728x90_bottom"],4103343:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3946287,3946289]}}})),/.*lifehacker\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187447,window.headertagconfig.partners.RUBI.slots=[{siteId:"45542",zoneId:"200898",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45542",zoneId:"200898",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45542",zoneId:"505510",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606429120738"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606429120738"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606429120738"}],window.headertagconfig.partners.AOL.placements={3996408:["300x250_mobile"],3996411:["320x50_mobile"],3996410:["300x250_mobile_bottom"],3996409:["320x50_mobile_bottom"],4267144:["300x250_mobile_inpost"],4267145:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996408,3996411]}}}):(window.headertagconfig.siteId=187437,window.headertagconfig.partners.RUBI.slots=[{siteId:"45540",zoneId:"200894",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45540",zoneId:"200894",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45540",zoneId:"200894",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45540",zoneId:"200894",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45540",zoneId:"200894",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3946172:["728x90_top"],3946171:["300x250_left"],3946173:["300x250_left_dynamic"],3946170:["728x90_bottom"],4103352:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3946172,3946171]}}})),/.*deadspin\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187463,window.headertagconfig.partners.RUBI.slots=[{siteId:"45522",zoneId:"200838",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45522",zoneId:"200838",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45522",zoneId:"505438",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606485787399"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606485787399"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606485787399"}],window.headertagconfig.partners.AOL.placements={3996376:["300x250_mobile"],3996377:["320x50_mobile"],3996374:["300x250_mobile_bottom"],3996375:["320x50_mobile_bottom"],4267080:["300x250_mobile_inpost"],4267081:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996376,3996377]}}}):(window.headertagconfig.siteId=187453,window.headertagconfig.partners.RUBI.slots=[{siteId:"45520",zoneId:"200834",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45520",zoneId:"200834",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45520",zoneId:"200834",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45520",zoneId:"200834",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45520",zoneId:"200834",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3946160:["728x90_top"],3946162:["300x250_left"],3946161:["300x250_left_dynamic"],3946163:["728x90_bottom"],4103339:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3946160,3946162]}}})),/.*kotaku\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187415,window.headertagconfig.partners.RUBI.slots=[{siteId:"45538",zoneId:"200886",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45538",zoneId:"200886",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45538",zoneId:"505508",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743605925787455"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743605925787455"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743605925787455"}],window.headertagconfig.partners.AOL.placements={3996406:["300x250_mobile"],3996405:["320x50_mobile"],3996404:["300x250_mobile_bottom"],3996407:["320x50_mobile_bottom"],4267142:["300x250_mobile_inpost"],4267143:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996406,3996405]}}}):(window.headertagconfig.siteId=187405,window.headertagconfig.partners.RUBI.slots=[{siteId:"45536",zoneId:"200882",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45536",zoneId:"200882",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45536",zoneId:"200882",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45536",zoneId:"200882",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45536",zoneId:"200882",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3946306:["728x90_top"],3946307:["300x250_left"],3946308:["300x250_left_dynamic"],3946309:["728x90_bottom"],4103350:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3946306,3946307]}}})),/.*jalopnik\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187431,window.headertagconfig.partners.RUBI.slots=[{siteId:"45526",zoneId:"200850",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"45526",zoneId:"200850",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"45526",zoneId:"505504",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606012454113"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606012454113"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_743606012454113"}],window.headertagconfig.partners.AOL.placements={3996397:["300x250_mobile"],3996396:["320x50_mobile"],3996398:["300x250_mobile_bottom"],3996399:["320x50_mobile_bottom"],4267100:["300x250_mobile_inpost"],4267099:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3996397,3996396]}}}):(window.headertagconfig.siteId=187421,window.headertagconfig.partners.RUBI.slots=[{siteId:"45524",zoneId:"200846",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"45524",zoneId:"200846",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"45524",zoneId:"200846",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"45524",zoneId:"200846",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"45524",zoneId:"200846",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={3943620:["728x90_top"],3943623:["300x250_left"],3943622:["300x250_left_dynamic"],3943621:["728x90_bottom"],4103345:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[3943620,3943623]}}})),/.*kinja\.com/.test(location.href)&&(window.headertag.Utils.isMobile()?(window.headertagconfig.siteId=187479,window.headertagconfig.partners.RUBI.slots=[{siteId:"76592",zoneId:"361122",sizes:[["300","250"],["320","50"]],id:"mobile"},{siteId:"76592",zoneId:"361122",sizes:[["300","250"],["320","50"]],id:"mobile_bottom"},{siteId:"76592",zoneId:"361122",sizes:[["300","250"],["320","50"]],id:"mobile_inpost"}],window.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250_mobile",sizes:[[300,250],[320,50]],placementId:"743604429120938_744780545669993"},{code:"300x250_mobile_bottom",sizes:[[300,250],[320,50]],placementId:"743604429120938_744780545669993"},{code:"300x250_mobile_inpost",sizes:[[300,250],[320,50]],placementId:"743604429120938_744780545669993"}],window.headertagconfig.partners.AOL.placements={4401867:["300x250_mobile"],4401860:["320x50_mobile"],4401859:["300x250_mobile_bottom"],4401865:["320x50_mobile_bottom"],4401863:["300x250_mobile_inpost"],4401866:["320x50_mobile_inpost"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[4401867,4401860]}}}):(window.headertagconfig.siteId=187469,window.headertagconfig.partners.RUBI.slots=[{siteId:"76590",zoneId:"361120",sizes:[["970","90"],["970","250"],["728","90"]],id:"top"},{siteId:"76590",zoneId:"361120",sizes:[["300","250"],["300","600"]],id:"left"},{siteId:"76590",zoneId:"361120",sizes:[["300","250"],["300","600"]],id:"left_dynamic"},{siteId:"76590",zoneId:"361120",sizes:[["970","250"],["728","90"]],id:"bottom"},{siteId:"76590",zoneId:"361120",sizes:[["300","250"]],id:"in_featured_post"}],window.headertagconfig.partners.AOL.placements={4401868:["728x90_top"],4401869:["300x250_left"],4401870:["300x250_left_dynamic"],4401872:["728x90_bottom"],4401871:["300x250_in_featured_post"]},window.headertagconfig.partners.AOL.prefetch={enabled:!0,info:{desktop:{divIds:[4401868,4401869]}}})),function(){"use strict";window.headertag.Q=function(){function e(e){return function(){return Q.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof F}function i(e,t){if(C&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ie)){for(var n=[],i=t;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(e.stack);var o=n.join("\n"+ie+"\n");e.stack=r(o)}}function r(e){for(var t=e.split("\n"),n=[],i=0;i<t.length;++i){var r=t[i];s(r)||o(r)||!r||n.push(r)}return n.join("\n")}function o(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function s(e){var t=a(e);if(!t)return!1;var n=t[0],i=t[1];return n===W&&i>=G&&de>=i}function d(){if(C)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],i=a(n);if(!i)return;return W=i[0],i[1]}}function p(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function l(e){return e instanceof f?e:v(e)?O(e):T(e)}function u(){function e(e){t=e,o.source=e,V(n,function(t,n){l.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,i=void 0}var t,n=[],i=[],r=Z(u.prototype),o=Z(f.prototype);if(o.promiseDispatch=function(e,r,o){var a=X(arguments);n?(n.push(a),"when"===r&&o[1]&&i.push(o[1])):l.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(n)return o;var e=m(t);return y(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},l.longStackSupport&&C)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return r.promise=o,r.resolve=function(n){t||e(l(n))},r.fulfill=function(n){t||e(T(n))},r.reject=function(n){t||e(S(n))},r.notify=function(e){t||V(i,function(t,n){l.nextTick(function(){n(e)})},void 0)},r}function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=u();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function h(e){return c(function(t,n){for(var i=0,r=e.length;r>i;i++)l(e[i]).then(t,n)})}function f(e,t,n){void 0===t&&(t=function(e){return S(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=Z(f.prototype);if(i.promiseDispatch=function(n,r,o){var a;try{a=e[r]?e[r].apply(i,o):t.call(i,r,o)}catch(s){a=S(s)}n&&n(a)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function g(e,t,n,i){return l(e).then(t,n,i)}function m(e){if(y(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function y(e){return e instanceof f}function v(e){return t(e)&&"function"==typeof e.then}function w(e){return y(e)&&"pending"===e.inspect().state}function I(e){return!y(e)||"fulfilled"===e.inspect().state}function b(e){return y(e)&&"rejected"===e.inspect().state}function _(){re.length=0,oe.length=0,se||(se=!0)}function x(e,t){se&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){-1!==$(oe,e)&&(process.emit("unhandledRejection",t,e),ae.push(e))}),oe.push(e),t&&"undefined"!=typeof t.stack?re.push(t.stack):re.push("(no stack) "+t))}function D(e){if(se){var t=$(oe,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){var n=$(ae,e);-1!==n&&(process.emit("rejectionHandled",re[t],e),ae.splice(n,1))}),oe.splice(t,1),re.splice(t,1))}}function S(e){var t=f({when:function(t){return t&&D(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return x(t,e),t}function T(e){return f({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function O(e){var t=u();return l.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function P(e){return f({isDef:function(){}},function(t,n){return j(e,t,n)},function(){return l(e).inspect()})}function E(e,t,n){return l(e).spread(t,n)}function R(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=i[e](t)}catch(s){return S(s)}return a.done?l(a.value):g(a.value,r,o)}try{a=i[e](t)}catch(s){return n(s)?l(s.value):S(s)}return g(a,r,o)}var i=e.apply(this,arguments),r=t.bind(t,"next"),o=t.bind(t,"throw");return r()}}function k(e){l.done(l.async(e)())}function z(e){throw new F(e)}function A(e){return function(){return E([this,N(arguments)],function(t,n){return e.apply(t,n)})}}function j(e,t,n){return l(e).dispatch(t,n)}function N(e){return g(e,function(e){var t=0,n=u();return V(e,function(i,r,o){var a;y(r)&&"fulfilled"===(a=r.inspect()).state?e[o]=a.value:(++t,g(r,function(i){e[o]=i,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function q(e){if(0===e.length)return l.resolve();var t=l.defer(),n=0;return V(e,function(i,r,o){function a(e){t.resolve(e)}function s(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function d(e){t.notify({index:o,value:e})}var p=e[o];n++,g(p,a,s,d)},void 0),t.promise}function U(e){return g(e,function(e){return e=J(e,l),g(N(J(e,function(e){return g(e,Y,Y)})),function(){return e})})}function M(e){return l(e).allSettled()}function B(e,t){return l(e).then(void 0,void 0,t)}function L(e,t){return l(e).nodeify(t)}var C=!1;try{throw new Error}catch(K){C=!!K.stack}var W,F,G=d(),Y=function(){},H=function(){function e(){for(var e,i;n.next;)n=n.next,e=n.task,n.task=void 0,i=n.domain,i&&(n.domain=void 0,i.enter()),t(e,i);for(;s.length;)e=s.pop(),t(e);r=!1}function t(t,n){try{t()}catch(i){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}var n={task:void 0,next:null},i=n,r=!1,o=void 0,a=!1,s=[];if(H=function(e){i=i.next={task:e,domain:a&&process.domain,next:null},r||(r=!0,o())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)a=!0,o=function(){process.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=function(){o=p,d.port1.onmessage=e,e()};var p=function(){d.port2.postMessage(0)};o=function(){setTimeout(e,0),p()}}else o=function(){setTimeout(e,0)};return H.runAfter=function(e){s.push(e),r||(r=!0,o())},H}(),Q=Function.call,X=e(Array.prototype.slice),V=e(Array.prototype.reduce||function(e,t){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(t=e(t,this[n],n));return t}),$=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=e(Array.prototype.map||function(e,t){var n=this,i=[];return V(n,function(r,o,a){i.push(e.call(t,o,a,n))},void 0),i}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var n in e)ee(e,n)&&t.push(n);return t},ne=e(Object.prototype.toString);F="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";l.resolve=l,l.nextTick=H,l.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=u,u.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(X(arguments,1)):e.resolve(n)}},l.Promise=c,l.promise=c,c.race=h,c.all=N,c.reject=S,c.resolve=l,l.passByCopy=function(e){return e},f.prototype.passByCopy=function(){return this},l.join=function(e,t){return l(e).join(t)},f.prototype.join=function(e){return l([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},l.race=h,f.prototype.race=function(){return this.then(l.race)},l.makePromise=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return S(n)}}function o(e){if("function"==typeof t){i(e,s);try{return t(e)}catch(n){return S(n)}}return S(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,d=u(),p=!1;return l.nextTick(function(){s.promiseDispatch(function(e){p||(p=!0,d.resolve(r(e)))},"when",[function(e){p||(p=!0,d.resolve(o(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(i){if(n=!0,!l.onerror)throw i;l.onerror(i)}n||d.notify(t)}]),d.promise},l.tap=function(e,t){return l(e).tap(t)},f.prototype.tap=function(e){return e=l(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},l.when=g,f.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,t){return l(e).thenResolve(t)},f.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,t){return l(e).thenReject(t)},l.nearer=m,l.isPromise=y,l.isPromiseAlike=v,l.isPending=w,f.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=I,f.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=b,f.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],oe=[],ae=[],se=!0;l.resetUnhandledRejections=_,l.getUnhandledReasons=function(){return re.slice()},l.stopUnhandledRejectionTracking=function(){_(),se=!1},_(),l.reject=S,l.fulfill=T,l.master=P,l.spread=E,f.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},l.async=R,l.spawn=k,l["return"]=z,l.promised=A,l.dispatch=j,f.prototype.dispatch=function(e,t){var n=this,i=u();return l.nextTick(function(){n.promiseDispatch(i.resolve,e,t)}),i.promise},l.get=function(e,t){return l(e).dispatch("get",[t])},f.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,t,n){return l(e).dispatch("set",[t,n])},f.prototype.set=function(e,t){return this.dispatch("set",[e,t])},l.del=l["delete"]=function(e,t){return l(e).dispatch("delete",[t])},f.prototype.del=f.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,t,n){return l(e).dispatch("post",[t,n])},f.prototype.mapply=f.prototype.post=function(e,t){return this.dispatch("post",[e,t])},l.send=l.mcall=l.invoke=function(e,t){return l(e).dispatch("post",[t,X(arguments,2)])},f.prototype.send=f.prototype.mcall=f.prototype.invoke=function(e){return this.dispatch("post",[e,X(arguments,1)])},l.fapply=function(e,t){return l(e).dispatch("apply",[void 0,t])},f.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,X(arguments,1)])},f.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(e){var t=l(e),n=X(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(X(arguments))])}},f.prototype.fbind=function(){var e=this,t=X(arguments);return function(){return e.dispatch("apply",[this,t.concat(X(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},f.prototype.keys=function(){return this.dispatch("keys",[])},l.all=N,f.prototype.all=function(){return N(this)},l.any=q,f.prototype.any=function(){return q(this)},l.allResolved=p(U,"allResolved","allSettled"),f.prototype.allResolved=function(){return U(this)},l.allSettled=M,f.prototype.allSettled=function(){return this.then(function(e){return N(J(e,function(e){function t(){return e.inspect()}return e=l(e),e.then(t,t)}))})},l.fail=l["catch"]=function(e,t){return l(e).then(void 0,t)},f.prototype.fail=f.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=B,f.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,t){return l(e)["finally"](t)},f.prototype.fin=f.prototype["finally"]=function(e){return e=l(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},l.done=function(e,t,n,i){return l(e).done(t,n,i)},f.prototype.done=function(e,t,n){var r=function(e){l.nextTick(function(){if(i(e,o),!l.onerror)throw e;l.onerror(e)})},o=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),o.then(void 0,r)},l.timeout=function(e,t,n){return l(e).timeout(t,n)},f.prototype.timeout=function(e,t){var n=u(),i=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(i),n.resolve(e)},function(e){clearTimeout(i),n.reject(e)},n.notify),n.promise},l.delay=function(e,t){return void 0===t&&(t=e,e=void 0),l(e).delay(t)},f.prototype.delay=function(e){return this.then(function(t){var n=u();return setTimeout(function(){n.resolve(t)},e),n.promise})},l.nfapply=function(e,t){return l(e).nfapply(t)},f.prototype.nfapply=function(e){var t=u(),n=X(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},l.nfcall=function(e){var t=X(arguments,1);return l(e).nfapply(t)},f.prototype.nfcall=function(){var e=X(arguments),t=u();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},l.nfbind=l.denodeify=function(e){var t=X(arguments,1);return function(){var n=t.concat(X(arguments)),i=u();return n.push(i.makeNodeResolver()),l(e).fapply(n).fail(i.reject),i.promise}},f.prototype.nfbind=f.prototype.denodeify=function(){var e=X(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,t){var n=X(arguments,2);return function(){function i(){return e.apply(t,arguments)}var r=n.concat(X(arguments)),o=u();return r.push(o.makeNodeResolver()),l(i).fapply(r).fail(o.reject),o.promise}},f.prototype.nbind=function(){var e=X(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,t,n){return l(e).npost(t,n)},f.prototype.nmapply=f.prototype.npost=function(e,t){var n=X(t||[]),i=u();return n.push(i.makeNodeResolver()),this.dispatch("post",[e,n]).fail(i.reject),i.promise},l.nsend=l.nmcall=l.ninvoke=function(e,t){var n=X(arguments,2),i=u();return n.push(i.makeNodeResolver()),l(e).dispatch("post",[t,n]).fail(i.reject),i.promise},f.prototype.nsend=f.prototype.nmcall=f.prototype.ninvoke=function(e){
var t=X(arguments,1),n=u();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},l.nodeify=L,f.prototype.nodeify=function(e){return e?void this.then(function(t){l.nextTick(function(){e(null,t)})},function(t){l.nextTick(function(){e(t)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var de=d();return l}()}(),function(){"use strict";function e(e){function t(e){d[e]=d[e]||{},d[e].startTime=i.now()}function n(e){d.hasOwnProperty(e)&&(d[e].stopTime=i.now())}function r(e,t,n){d[e].partners=d[e].partners||{},d[e].partners[t]=d[e].partners[t]||{},d[e].partners[t].timeout=n,d[e].partners[t].startTime=i.now()}function o(e,t){d.hasOwnProperty(e)&&(d[e].partners[t].stopTime=i.now())}function a(e,t,n,i){d.hasOwnProperty(e)&&(d[e].partners[t].targetingType=n,d[e].partners[t].returnedDemand=i)}function s(t){if(d.hasOwnProperty(t)){var n={};n.s=e,n.u=encodeURIComponent(document.location.href),n.type="RT",n.r=t.replace("_",""),n.t0=d[t].startTime,n.t1=d[t].stopTime||-1;var r=d[t].partners;for(var o in r)if(r.hasOwnProperty(o)){var a=-1,s=1;r[o].startTime&&r[o].stopTime&&(a=r[o].stopTime-r[o].startTime,s=0),n[o+".t"]=a,n[o+".to"]=s,n[o+".ts"]=r[o].timeout||-1;var p=null;if(r[o].hasOwnProperty("returnedDemand"))if("page"===r[o].targetingType)for(p in r[o].returnedDemand.page.demand)r[o].returnedDemand.page.demand.hasOwnProperty(p)&&(n[o+".p.pl."+p]=r[o].returnedDemand.page.demand[p].toString()||"");else for(var l in r[o].returnedDemand.slot)if(r[o].returnedDemand.slot.hasOwnProperty(l))for(p in r[o].returnedDemand.slot[l].demand)r[o].returnedDemand.slot[l].demand.hasOwnProperty(p)&&(n[o+".p."+l+"."+p]=r[o].returnedDemand.slot[l].demand[p].toString()||"")}var u=i.objToQueryString(n),c=("https:"===document.location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+u,h=new XMLHttpRequest;h.open("GET",c,!0),h.send(),delete d[t]}}var d={};this.startSessionTimer=t,this.stopSessionTimer=n,this.startPartnerTimer=r,this.stopPartnerTimer=o,this.recordReturnedDemand=a,this.sendReport=s}function t(t){function r(e,n){function r(n,r){if((!n||r)&&(O[e]=r,P[e]=t.partners[e].disabled,E[e]=t.partners[e].timeout,!B&&r.getSupportedOptions().hasOwnProperty("prefetch")&&r.getSupportedOptions().prefetch&&t.partners[e].hasOwnProperty("prefetch")&&t.partners[e].prefetch.enabled)){var o=i.generateCorrelator();N.startSessionTimer(o),N.startPartnerTimer(o,e,E[e]);var a=function(){N.stopPartnerTimer(o,e),N.stopSessionTimer(o),N.sendReport(o)},s=r.getPartnerTargetingType();"page"===s?r.prefetchDemand(o,M,a):t.partners[e].prefetch.hasOwnProperty("info")&&window.headertag.pagetype&&t.partners[e].prefetch.info.hasOwnProperty(window.headertag.pagetype)&&r.prefetchDemand(o,t.partners[e].prefetch.info[window.headertag.pagetype],a)}}var o=[];return i.validateNonEmptyString(e)||o.push("partnerId must be a non-empty string."),O.hasOwnProperty(e)&&o.push("partnerId already registered."),i.validateFunction(n)||o.push("init must be a function."),o.length?!1:(t.partners.hasOwnProperty(e)&&n(t.partners[e],r),!0)}function o(e,t){var n=[];if(i.validateNonEmptyArray(e)||n.push("partnerIds must be a non-empty array."),i.validateBoolean(t)||n.push("toggle must be a boolean."),n.length)return!1;for(var r=!1,o=0,a=e.length;a>o;o++)if(O.hasOwnProperty(e[o])){if("INDX"===e[o])continue;P[e[o]]=t,r=!0}return r}function a(e){var t=[];return i.validateInteger(e,1)||t.push("timeout must be an interger and greater than 0."),t.length?!1:(T=e,!0)}function s(e){return o(e,!1)}function d(e){return o(e,!0)}function p(e,t){var n=[];return i.validateInteger(t,0)||n.push("timeout must be an interger and greater than or equal to 0."),E.hasOwnProperty(e)||n.push("partnerId not registered and instantiated."),n.length?!1:(E[e]=t,!0)}function l(e,t){var n=[];return i.validateNonEmptyString(e)||n.push("partnerId must be a non-empty string."),O.hasOwnProperty(e)||n.push("partnerId is not registered."),i.validateNonEmptyString(t)||n.push("targetingType must be a non-empty string."),n.length?!1:O[e].setPartnerTargetingType(t)}function u(e,t){if(i.validateNonEmptyObject(e)){var n=i.getDivIdToSlotMap(t),r=null,o=null;for(var a in e)if(e.hasOwnProperty(a))if(e[a].hasOwnProperty("page"))for(o in e[a].page.demand)e[a].page.demand.hasOwnProperty(o)&&(googletag.pubads().setTargeting(o,e[a].page.demand[o]),q.page[o]=!0);else if(e[a].hasOwnProperty("slot"))for(r in n)if(n.hasOwnProperty(r)&&e[a].slot.hasOwnProperty(r))for(o in e[a].slot[r].demand)e[a].slot[r].demand.hasOwnProperty(o)&&(n[r].setTargeting(o,e[a].slot[r].demand[o]),q.slot[r]=q.slot[r]||{},q.slot[r][o]=!0)}}function c(e){var t=null;for(t in q.page)q.page.hasOwnProperty(t)&&(googletag.pubads().clearTargeting(t),delete q.page[t]);for(var n=0;n<e.length;n++){var i=e[n].getSlotElementId();if(q.slot.hasOwnProperty(i)){var r=e[n].getTargetingMap();e[n].clearTargeting();for(t in r)r.hasOwnProperty(t)&&(q.slot[i].hasOwnProperty(t)||e[n].setTargeting(t,r[t]));delete q.slot[i]}}}function h(e){c(e.slots),u(e.demand,e.slots),e.divId?googletag.display(e.divId):googletag.pubads().refresh(e.slots,e.opt)}function f(e,t,r,o){var a=[];if(i.validateNonEmptyString(e)||a.push("correlator must be a non-empty string."),i.validateNonEmptyString(r)||a.push("partnerId must be a non-empty string."),O.hasOwnProperty(r)||a.push("partnerId not registered and instantiated."),i.validateNonEmptyArray(o)||a.push("slots must be a non-empty array."),a.length)return null;var s=n.defer(),d=null,p=!1,l=O[r].getPartnerTargetingType(),u=function(t,n){if(!p){if(clearTimeout(d),O[r].getSupportedAnalytics().time&&N.stopPartnerTimer(e,r),t)return void s.reject();if(!i.validateNonEmptyObject(n))return void s.reject();O[r].getSupportedAnalytics().demand&&N.recordReturnedDemand(e,r,l,n);var o={};o[r]=n,s.resolve(o)}};return E[r]&&(d=setTimeout(function(){p=!0,s.reject()},E[r])),O[r].getSupportedAnalytics().time&&N.startPartnerTimer(e,r,E[r]),"page"===l?O[r].getDemand(e,t,u):O[r].getDemand(e,o,u),s.promise}function g(e){for(var t={},n=0,i=e.length;i>n;n++)if("fulfilled"===e[n].state){var r=e[n].value;for(var o in r)if(r.hasOwnProperty(o))if(t.hasOwnProperty(o)){if(r[o].hasOwnProperty("page"))t[o].page.timestamp<r[o].page.timestamp&&(t[o]=r[o]);else if(r[o].hasOwnProperty("slot"))for(var a in r[o].slot)r[o].slot.hasOwnProperty(a)&&(t[o].slot.hasOwnProperty(a)?t[o].slot[a].timestamp<r[o].slot[a].timestamp&&(t[o].slot[a]=r[o].slot[a]):t[o].slot[a]=r[o].slot[a])}else t[o]=r[o]}return t}function m(e,t,r,o){var a=n.defer(),s=[];if(i.validateNonEmptyString(e)||s.push("correlator must be a non-empty string."),i.validateNonEmptyArray(r)||s.push("slots must be a non-empty array."),i.validateNonEmptyString(o)||s.push("action must be a non-empty string."),s.length)return a.resolve(),a.promise;r=r.slice();var d=[],p={};for(var l in O)O.hasOwnProperty(l)&&(p[l]=r.slice());for(var u=r.length-1;u>=0;u--){var c=r[u].getSlotElementId();if(R.hasOwnProperty(c)){d.indexOf(R[c])<0&&d.push(R[c]);var h=i.now(),m=R[c].inspect();if("fulfilled"===m.state){var y=m.value;for(var v in y)if(y.hasOwnProperty(v))if(O[v].getPartnerDemandExpiry()<0)p[v].splice(p[v].indexOf(r[u]),1);else if(y[v].hasOwnProperty("page")){if(y[v].page.gCorrelator!==t)continue;if(h-y[v].page.timestamp>O[v].getPartnerDemandExpiry())continue;p[v].splice(p[v].indexOf(r[u]),1)}else if(y[v].hasOwnProperty("slot")){if(!y[v].slot.hasOwnProperty(c))continue;if(h-y[v].slot[c].timestamp>O[v].getPartnerDemandExpiry())continue;p[v].splice(p[v].indexOf(r[u]),1)}}else for(var w in O)O.hasOwnProperty(w)&&p[w].splice(p[w].indexOf(r[u]),1)}else R[c]=a.promise}("display"!==o||r.length)&&N.startSessionTimer(e);var I=[];for(var b in O)O.hasOwnProperty(b)&&I.push(b);for(;I.length;){var _=i.randomSplice(I);if(!P[_]&&p[_].length){var x=f(e,t,_,p[_]);d.push(x)}}var D=null,S=!1;return T&&(D=setTimeout(function(){S=!0;for(var e=[],t=0,n=d.length;n>t;t++)e.push(d[t].inspect());var i=g(e);if("display"!==o||!A)for(var t=0;t<r.length;t++){var s=r[t].getSlotElementId();R.hasOwnProperty(s)&&delete R[s]}a.resolve(i)},T)),n.allSettled(d).then(function(t){if(!S){clearTimeout(D),("display"!==o||r.length)&&N.stopSessionTimer(e);var n=g(t);if("display"!==o||!A)for(var i=0;i<r.length;i++){var s=r[i].getSlotElementId();R.hasOwnProperty(s)&&delete R[s]}a.resolve(n)}}),a.promise}function y(e){var t=[];if(i.validateNonEmptyString(e)||t.push("Invalid divId."),!t.length){B=!0;var n=null;if(j?k?n=[i.divIdToSlot(e)]:(k=!0,n=i.getSlots()):n=[i.divIdToSlot(e)],!U.hasOwnProperty(e)){for(var r=i.getDivIds(n),o=0,a=r.length;a>o;o++)U[r[o]]=!0;var s=i.generateCorrelator();m(s,M,n,"display").then(function(t){if(A)return void googletag.display(e);var i={demand:t,slots:n,divId:e,correlator:s};return h(i)}).then(function(){N.sendReport(s)})["catch"](function(e){})}}}function v(e,t,n,r){var o=[];if(i.validateNonEmptyString(e)||o.push("adUnitPath must be a non-empty string."),i.validateNonEmptyArray(t)||o.push("size must be a non-empty array."),i.validateNonEmptyString(n,!0)||o.push("Optional. divId must be a non-empty string."),i.validateNonEmptyString(r,!0)||o.push("Optional. clickUrl must be a non-empty string."),!o.length){var a=googletag.defineSlot(e,t,n).addService(googletag.pubads());r&&a.setClickUrl(r),y(n)}}function w(e,t){var n=[];if(i.validateNonEmptyArray(e,!0)||n.push("Optional. slots must be a non-empty array."),i.validateNonEmptyObject(t,!0)||n.push("Optional. options must be a non-empty object."),!n.length){e&&e.length||(e=i.getSlots());var r=i.generateCorrelator();A&&!z?z=!0:M=googletag.pubads().getCorrelator(),m(r,M,e,"refresh").then(function(n){if(j){var i={demand:n,slots:e,opt:t,correlator:r};h(i)}else for(var o=0,a=e.length;a>o;o++)h({demand:n,slots:[e[o]],opt:t,correlator:r})}).then(function(){N.sendReport(r)})["catch"](function(e){})}}function I(){return{display:v.bind(b),refresh:w.bind(b)}}var b=this,_=[],x=[];i.validateNonEmptyObject(t)||x.push("Config not provided."),t.hasOwnProperty("siteId")&&i.validateInteger(t.siteId,0)||(t.siteId=0,_.push("Invalid siteId, using default value of 0.")),t.hasOwnProperty("timeout")&&i.validateInteger(t.timeout,1)||(t.timeout=1e3,_.push("Invalid timeout, using default value of 1000ms.")),t.hasOwnProperty("disableInitialLoad")?i.validateBoolean(t.disableInitialLoad)||(t.disableInitialLoad=!1,_.push("Invalid disableInitialLoad, using default value of false.")):t.disableInitialLoad=!1,t.hasOwnProperty("enableSingleRequest")?i.validateBoolean(t.enableSingleRequest)||(t.enableSingleRequest=!0,_.push("Invalid enableSingleRequest, using default value of true.")):(t.enableSingleRequest=!0,_.push("enableSingleRequest not provided, using default value of true.")),t.partners&&t.partners.hasOwnProperty("INDX")||(t.partners=t.partners||{},t.partners.INDX={});for(var D in t.partners)t.partners.hasOwnProperty(D)&&(t.partners[D].hasOwnProperty("disabled")?(i.validateBoolean(t.partners[D].disabled)||(_.push("Invalid disabled set for "+D+", using default value true."),t.partners[D].disabled=!0),"INDX"===D&&t.partners[D].disabled===!0&&(t.partners[D].disabled=!1,_.push("Cannot disable partner INDX."))):t.partners[D].disabled=!1,t.partners[D].hasOwnProperty("timeout")?i.validateInteger(t.partners[D].timeout,0)||(_.push("Invalid partner timeout set for "+D+", using default value 0 (i.e. not set)."),t.partners[D].timeout=0):t.partners[D].timeout=0);if(_.length,!x.length){var S=t.siteId,T=t.timeout,O={},P={},E={},R={},k=!1,z=!1,A=t.disableInitialLoad,j=t.enableSingleRequest,N=new e(S),q={page:{},slot:{}},U={},M=-1,B=!1;this.apiReady=!0,this.bidderQueue=[],this.registerPartner=r,this.setGlobalTimeout=a,this.enablePartners=s,this.disablePartners=d,this.setPartnerTimeout=p,this.setPartnerTargetingType=l,this.display=y,this.pubads=I}}var n=window.headertag.Q,i=window.headertag.Utils;if(window.headertag){var r=window.headertag;window.headertag=new t(window.headertagconfig);for(var o in r)r.hasOwnProperty(o)&&"display"!==o&&"pubads"!==o&&(window.headertag[o]=r[o])}}(),/.*jezebel\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187389,slots:[{id:"1",width:970,height:90,siteID:187389},{id:"2",width:970,height:250,siteID:187390},{id:"3",width:728,height:90,siteID:187391},{id:"4",width:300,height:250,siteID:187392},{id:"5",width:300,height:600,siteID:187393},{id:"6",width:300,height:250,siteID:187394},{id:"7",width:300,height:600,siteID:187395},{id:"8",width:970,height:250,siteID:187396},{id:"9",width:728,height:90,siteID:187397},{id:"10",width:300,height:250,siteID:187398},{id:"11",width:300,height:250,siteID:187399},{id:"12",width:320,height:50,siteID:187400},{id:"13",width:300,height:250,siteID:187401},{id:"14",width:320,height:50,siteID:187402},{id:"15",width:300,height:250,siteID:187403},{id:"16",width:320,height:50,siteID:187404}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*gizmodo\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187277,slots:[{id:"1",width:970,height:90,siteID:187277},{id:"2",width:970,height:250,siteID:187278},{id:"3",width:728,height:90,siteID:187279},{id:"4",width:300,height:250,siteID:187280},{id:"5",width:300,height:600,siteID:187281},{id:"6",width:300,height:250,siteID:187282},{id:"7",width:300,height:600,siteID:187283},{id:"8",width:970,height:250,siteID:187284},{id:"9",width:728,height:90,siteID:187285},{id:"10",width:300,height:250,siteID:187286},{id:"11",width:300,height:250,siteID:187287},{id:"12",width:320,height:50,siteID:187288},{id:"13",width:300,height:250,siteID:187289},{id:"14",width:320,height:50,siteID:187290},{id:"15",width:300,height:250,siteID:187291},{id:"16",width:320,height:50,siteID:187292}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*kotaku\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187405,slots:[{id:"1",width:970,height:90,siteID:187405},{id:"2",width:970,height:250,siteID:187406},{id:"3",width:728,height:90,siteID:187407},{id:"4",width:300,height:250,siteID:187408},{id:"5",width:300,height:600,siteID:187409},{id:"6",width:300,height:250,siteID:187410},{id:"7",width:300,height:600,siteID:187411},{id:"8",width:970,height:250,siteID:187412},{id:"9",width:728,height:90,siteID:187413},{id:"10",width:300,height:250,siteID:187414},{id:"11",width:300,height:250,siteID:187415},{id:"12",width:320,height:50,siteID:187416},{id:"13",width:300,height:250,siteID:187417},{id:"14",width:320,height:50,siteID:187418},{id:"15",width:300,height:250,siteID:187419},{id:"16",width:320,height:50,siteID:187420}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*jalopnik\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187421,slots:[{id:"1",width:970,height:90,siteID:187421},{id:"2",width:970,height:250,siteID:187422},{id:"3",width:728,height:90,siteID:187423},{id:"4",width:300,height:250,siteID:187424},{id:"5",width:300,height:600,siteID:187425},{id:"6",width:300,height:250,siteID:187426},{id:"7",width:300,height:600,siteID:187427},{id:"8",width:970,height:250,siteID:187428},{id:"9",width:728,height:90,siteID:187429},{id:"10",width:300,height:250,siteID:187430},{id:"11",width:300,height:250,siteID:187431},{id:"12",width:320,height:50,siteID:187432},{id:"13",width:300,height:250,siteID:187433},{id:"14",width:320,height:50,siteID:187434},{id:"15",width:300,height:250,siteID:187435},{id:"16",width:320,height:50,siteID:187436}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*lifehacker\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187437,slots:[{id:"1",width:970,height:90,siteID:187437},{id:"2",width:970,height:250,siteID:187438},{id:"3",width:728,height:90,siteID:187439},{id:"4",width:300,height:250,siteID:187440},{id:"5",width:300,height:600,siteID:187441},{id:"6",width:300,height:250,siteID:187442},{id:"7",width:300,height:600,siteID:187443},{id:"8",width:970,height:250,siteID:187444},{id:"9",width:728,height:90,siteID:187445},{id:"10",width:300,height:250,siteID:187446},{id:"11",width:300,height:250,siteID:187447},{id:"12",width:320,height:50,siteID:187448},{id:"13",width:300,height:250,siteID:187449},{id:"14",width:320,height:50,siteID:187450},{id:"15",width:300,height:250,siteID:187451},{id:"16",width:320,height:50,siteID:187452}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*deadspin\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187453,slots:[{id:"1",width:970,height:90,siteID:187453},{id:"2",width:970,height:250,siteID:187454},{id:"3",width:728,height:90,siteID:187455},{id:"4",width:300,height:250,siteID:187456},{id:"5",width:300,height:600,siteID:187457},{id:"6",width:300,height:250,siteID:187458},{id:"7",width:300,height:600,siteID:187459},{id:"8",width:970,height:250,siteID:187460},{id:"9",width:728,height:90,siteID:187461},{id:"10",width:300,height:250,siteID:187462},{id:"11",width:300,height:250,siteID:187463},{id:"12",width:320,height:50,siteID:187464},{id:"13",width:300,height:250,siteID:187465},{id:"14",width:320,height:50,siteID:187466},{id:"15",width:300,height:250,siteID:187467},{id:"16",width:320,height:50,siteID:187468}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),/.*kinja\.com/.test(location.href)&&(window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:187469,slots:[{id:"1",width:970,height:90,siteID:187469},{id:"2",width:970,height:250,siteID:187470},{id:"3",width:728,height:90,siteID:187471},{id:"4",width:300,height:250,siteID:187472},{id:"5",width:300,height:600,siteID:187473},{id:"6",width:300,height:250,siteID:187474},{id:"7",width:300,height:600,siteID:187475},{id:"8",width:970,height:250,siteID:187476},{id:"9",width:728,height:90,siteID:187477},{id:"10",width:300,height:250,siteID:187478},{id:"11",width:300,height:250,siteID:187479},{id:"12",width:320,height:50,siteID:187480},{id:"13",width:300,height:250,siteID:187481},{id:"14",width:320,height:50,siteID:187482},{id:"15",width:300,height:250,siteID:187483},{id:"16",width:320,height:50,siteID:187484}],gpt_map:{desktop:{"970_90":{1:{pos:["top"]}},"970_250":{2:{pos:["top"]},8:{pos:["bottom"]}},"728_90":{3:{pos:["top"]},9:{pos:["bottom"]}},"300_250":{4:{pos:["left"]},6:{pos:["left_dynamic"]},10:{pos:["in_featured_post"]}},"300_600":{5:{pos:["left"]},7:{pos:["left_dynamic"]}}},mobile:{"300_250":{11:{pos:["mobile"]},13:{pos:["mobile_bottom"]},15:{pos:["mobile_inpost"]}},"320_50":{12:{pos:["mobile"]},14:{pos:["mobile_bottom"]},16:{pos:["mobile_inpost"]}}}}}),window.headertag.bidderQueue.push(function(){"use strict";function e(e){return"string"==typeof e&&r[e]}function t(t){function n(e){for(var t={},n=0;n<e.length;n++){var i=e[n];i.sizeIds=[];for(var r=0;r<i.sizes.length;r++){var o=i.sizes[r],a=o[0]+"x"+o[1];d.hasOwnProperty(a)&&i.sizeIds.push(d[a])}t[i.id]=i}return t}function i(e){var t=n(e),i={};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o.sizes.length){var a=window.rubicontag.defineSlot({siteId:o.siteId,zoneId:o.zoneId,sizes:o.sizeIds,id:o.id});i[r]=a}}return i}function r(e){return"undefined"!=typeof e.getTargetingMap().pos?e.getTargetingMap().pos[0]:void 0}function u(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];v.hasOwnProperty(i)&&t.push(v[i])}return t}var c=this,h=t.targetingType,f=o,g=a,m={state:s.NEW,correlator:null,slotIds:[],callbacks:[]},y={},v={};this.getPartnerTargetingType=function(){return h},this.getSupportedAnalytics=function(){return f},this.getSupportedOptions=function(){return g},this.getPartnerDemandExpiry=function(){return g.demandExpiry},this.setPartnerTargetingType=function(t){return e(t)?(h=t,!0):!1},this.prefetchDemand=function(e,n,r){m.state=s.IN_PROGRESS,m.correlator=e,m.slotIds=n.divIds.slice(),y[e]={slot:{}},window.rubicontag.cmd.push(function(){v=i(t.slots);var n=u(m.slotIds);if(n.length)window.rubicontag.run(function(){for(var t=0;t<n.length;t++)y[e].slot[n[t].getElementId()]={timestamp:p.now(),demand:{}};m.state=s.READY,r(e);for(var i=0,o=m.callbacks.length;o>i;i++)setTimeout(m.callbacks[i],0)},{slots:n});else{for(var o=0;o<n.length;o++)y[e].slot[n[o].getElementId()]={timestamp:p.now(),demand:{}};m.state=s.READY,r(e);for(var a=0,d=m.callbacks.length;d>a;a++)setTimeout(m.callbacks[a],0)}})},this.getDemand=function w(e,n,o){var a=l.defer();if(m.state===s.IN_PROGRESS){for(var d=p.getDivIds(n),h=!1,f=0,I=d.length;I>f;f++){var b=m.slotIds.indexOf(d[f]);-1!==b&&(m.slotIds.splice(b,1),h=!0)}if(h)return void m.callbacks.push(w.bind(c,e,n,o))}var _={slot:{}};if(m.state===s.READY){for(var x=n.length-1;x>=0;x--){var D=r(n[x]);if(y[m.correlator].slot.hasOwnProperty(D)){if(g.demandExpiry<0||p.now()-y[m.correlator].slot[D].timestamp<=g.demandExpiry){_.slot[D]=y[m.correlator].slot[D];for(var D=r(n[x]),S=window.rubicontag.getAllSlots(),T=0;T<S.length;T++)if(D==S[T].getElementId())for(var O=S[T].getAdServerTargeting(),P=0;P<O.length;P++)n[x].setTargeting(O[P].key,O[P].values.join(","));n.splice(x,1)}delete y[m.correlator].slot[D]}}if(p.validateNonEmptyObject(y[m.correlator].slot)||(m.state=s.USED),!n.length)return void a.resolve(_)}return window.rubicontag.cmd.push(function(){v=i(t.slots);for(var e=[],o=0;o<n.length;o++){var s=r(n[o]);""!==s&&e.push(s)}var d=u(e);return d.length?void window.rubicontag.run(function(){for(var e=0;e<n.length;e++)for(var t=r(n[e]),i=window.rubicontag.getAllSlots(),o=0;o<i.length;o++)if(t==i[o].getElementId())for(var s=i[o].getAdServerTargeting(),d=0;d<s.length;d++)n[e].setTargeting(s[d].key,s[d].values.join(","));a.resolve(_)},{slots:d}):void a.resolve(_)}),a.promise}}function n(n,i){var r=[];if(n.hasOwnProperty("targetingType")&&e(n.targetingType)||r.push("targetingType either not provided or invalid."),p.validateNonEmptyString(n.networkId)||r.push("networkId either not provided or not a string."),p.validateNonEmptyObject(n.slots))for(var o=["siteId","zoneId","id"],a=0;a<n.slots.length;a++)if(p.validateNonEmptyObject(n.slots[a])){for(var s=0;s<o.length;s++)p.validateNonEmptyString(n.slots[a][o[s]])||r.push("slot."+o[s]+" not a non-empty string");if(p.validateNonEmptyArray(n.slots[a].sizes))for(s=0;s<n.slots[a].sizes;s++){var l=n.slots[a].sizes[s];p.validateNonEmptyArray(l)&&2===l.length?p.validateInteger(l[0])&&p.validateInteger(l[1])?d.hasOwnProperty(l[0]+"x"+l[1])||r.push("size array contains unknown size values"):r.push("size array contains non-integer"):r.push("size array is not an array with 2 elements")}else r.push("slot sizes not a non-empty array")}else r.push("slots not an object containing only objects");else r.push("slots either not provided or not an object");if(r.length)return void i(r);window.rubicontag=window.rubicontag||{},window.rubicontag.cmd=window.rubicontag.cmd||[];var u=n.networkId,c="//ads.rubiconproject.com/header/"+u+".js";p.addScriptTag(c,!0,function(){}),i(null,new t(n))}var i="RUBI",r={page:!1,slot:!0},o={time:!0,demand:!1},a={prefetch:!0,demandExpiry:-1},s={NEW:1,IN_PROGRESS:2,READY:3,USED:4},d={"468x60":1,"728x90":2,"120x600":8,"160x600":9,"300x600":10,"300x250":15,"336x280":16,"320x50":43,"300x50":44,"300x1050":54,"970x90":55,"970x250":57,"1000x90":58,"320x480":67,"1800x1000":68,"480x320":101,"768x1024":102},p=window.headertag.Utils,l=window.headertag.Q;window.headertag.registerPartner(i,n)}),window.headertag.bidderQueue.push(function(){"use strict";function e(e){return"string"==typeof e&&r[e]}function t(t,i){var r=[];if(t.hasOwnProperty("targetingType")&&e(t.targetingType)||r.push("targetingType either not provided or invalid."),t.hasOwnProperty("dynamicMapping")&&!p.validateBoolean(t.dynamicMapping)&&r.push("dynamicMapping invalid."),t.hasOwnProperty("uniqueTargeting")&&!p.validateNonEmptyString(t.uniqueTargeting)&&r.push("uniqueTargeting invalid."),t.hasOwnProperty("slotSizes"))if(p.validateNonEmptyArray(t.slotSizes))for(var o=0;o<t.slotSizes.length;o++){var a=t.slotSizes[o];2===a.length&&p.isInteger(a[0])&&p.isInteger(a[1])||r.push("slotSizes invalid.")}else r.push("slotSizes invalid.");if(t.hasOwnProperty("appId")&&p.validateNonEmptyString(t.appId)||r.push("appId either not provided or invalid."),t.hasOwnProperty("adUnits")&&p.validateNonEmptyObject(t.adUnits))for(var s in t.adUnits)if("mobile"===s||"desktop"===s)for(var d=0,l=t.adUnits[s].length;l>d;d++){var u=t.adUnits[s][d];if(u.hasOwnProperty("code")&&p.validateNonEmptyString(u.code)||r.push("code not provided or invalid."),u.hasOwnProperty("placementId")&&p.validateNonEmptyString(u.placementId)||r.push("placementId not provided or invalid."),u.hasOwnProperty("sizes")&&p.isArray(u.sizes)&&u.sizes.length)for(var c=0,h=u.sizes.length;h>c;c++){var f=u.sizes[c];p.isArray(f)&&2===f.length&&p.isInteger(f[0])&&p.isInteger(f[1])||r.push("size not provided or invalid.")}else r.push("sizes not provided or invalid.")}else r.push("adUnits device invalid.");else r.push("adUnits either not provided or invalid.");if(t.hasOwnProperty("roundingBuckets")){var g=t.roundingBuckets;if((!g.hasOwnProperty("type")||!p.isInteger(g.type)||g.type>3||g.type<0)&&r.push("roundingBuckets type either not provided or invalid."),g.hasOwnProperty("buckets")&&p.isArray(g.buckets))for(var m=0,y=g.buckets.length;y>m;m++){var v=g.buckets[m];p.isArray(v.range)&&2===v.range.length?p.isInteger(v.range[0])&&p.isInteger(v.range[1])||r.push("range not provided or invalid."):r.push("range not provided or invalid."),v.hasOwnProperty("granularity")&&!isNaN(v.granularity)||r.push("granularity not provided or invalid.")}else r.push("buckets either not provided or invalid.")}if(r.length)return void i(r);var w=new n(t);window.renderFacebookAd=w.fbRenderAd,i(null,w)}function n(t){function n(e,t){for(var n=0;n<j.length;n++)if(j[n][0]===parseInt(e)&&j[n][1]===parseInt(t))return!0;return!1}function i(e){return e.getSlotElementId()}function r(e){for(var t=i(e),n=0;n<R.length;n++){var r=R[n].code;if(t===r)return r}return t}function l(e){var t=e.getSizes();if(0!==e.getTargeting(A).length)for(var i=0;i<t.length;i++){var r=t[i];if(n(r.getWidth(),r.getHeight()))return r.getWidth()+"x"+r.getHeight()+"_"+e.getTargeting(A)[0]}return""}function u(e){for(var t=z?l:r,n=[],i=0;i<e.length;i++)n.push(t(e[i]));return n}function c(e){for(var t=z?l:r,n=p.getSlots(),o=0;o<n.length;o++)if(t(n[o])===e)return i(n[o]);return""}function h(e){for(var t=[],n=0;n<R.length;n++){var i=R[n];e===i.placementId&&t.push(c(i.code))}return t}function f(e){for(var t=0;t<R.length;t++){var n=R[t];if(e===n.code)return n.placementId}return""}function g(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n][0]+"x"+e[n][1]);return t[0]}function m(e){for(var t=0;t<R.length;t++){var n=R[t];if(e===n.placementId)return g(n.sizes)}return""}function y(e){for(var t=[],n=0,i=e.length;i>n;n++)for(var r=0;r<R.length;r++)e[n]===R[r].code&&t.push(R[r]);return t}function v(e){var t=y(e);if(!t.length)return"";for(var n="https://an.facebook.com/v2/placementbid.json",i="?sdk=5.3.web&",r=0;r<t.length;r++){var o=t[r],a=encodeURIComponent(o.placementId),s=encodeURIComponent(g(o.sizes));i+="placementids[]="+a+"&adformats[]="+s+"&"}i=i.slice(0,-1);var d=encodeURIComponent(p.getPageUrl());i+="&pageurl="+d;var l=k?"&testmode=true":"",u=n+i+l;return u}function w(e){for(var t=Number(e)/100,n=1,i=0,r=E.buckets.length;r>i;i++){var o=E.buckets[i];if(t>=o.range[0]&&t<o.range[1]){n=o.granularity;break}i===r-1&&(t=o.range[1],n=o.granularity)}return t=100*t/(100*n),E.type===d.FLOOR?t=Math.floor(t):E.type===d.ROUND?t=Math.round(t):E.type===d.CEIL&&(t=Math.ceil(t)),(t*n).toFixed(2)}function I(e){var t=w(e.bid_price_cents);return 0===Number(t)?{}:{fb_bid_id:e.bid_id,fb_cpm:t}}function b(e,t){var n=v(e);if(!n)return void t("FB: Failed to get bid request URL");var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(200!==i.status)return void t("FB: No demand response");t(null,JSON.parse(i.responseText))}},i.open("GET",n,!0),i.withCredentials=!0,i.send()}var _=this,x=t.targetingType,D=o,S=a,T={state:s.NEW,correlator:null,gCorrelator:null,slotIds:[],callbacks:[]},O={},P={},E=t.roundingBuckets?t.roundingBuckets:{type:d.FLOOR,buckets:[{range:[0,20],granularity:.05}]},R=p.isMobile()?t.adUnits.mobile:t.adUnits.desktop,k=t.debug,z=(t.appId,t.dynamicMapping||!1),A=t.uniqueTargeting||"pos",j=t.slotSizes||[[300,250],[320,50]];this.getPartnerTargetingType=function(){return x},this.getSupportedAnalytics=function(){return D},this.getSupportedOptions=function(){return S},this.getPartnerDemandExpiry=function(){return S.demandExpiry},this.setPartnerTargetingType=function(t){return e(t)?(x=t,!0):!1},this.fbRenderAd=function(e,t){if(e&&t)try{var n=P[t];if(n){var i=n.adSize,r=n.placementId;e.write('<html><body><div style="display:none; position: relative;"><iframe style="display:none;"></iframe><script type="text/javascript">var data = {placementid: "'+r+'",format: "'+i+'",bidid: "'+t+'",testmode: false,onAdLoaded: function(element) {element.style.display = "block";},onAdError: function(errorCode, errorMessage) {}};(function(w, l, d, t) {var a = t();var b = d.currentScript || (function() {var c = d.getElementsByTagName("script");return c[c.length - 1];})();var e = b.parentElement;e.dataset.placementid = data.placementid;var f = function(v) {    try {        return v.document.referrer;    } catch (e) {}    return "";};var g = function(h) {    var i = h.indexOf("/", h.indexOf("://") + 3);    if (i === -1) {        return h;    }    return h.substring(0, i);};var j = [l.href];var k = false;var m = false;if (w !== w.parent) {    var n;    var o = w;    while (o !== n) {        var h;        try {            m = m || (o.$sf && o.$sf.ext);            h = o.location.href;        } catch (e) {            k = true;        }        j.push(h || f(n));        n = o;        o = o.parent;    }}var p = l.ancestorOrigins;if (p) {    if (p.length > 0) {        data.domain = p[p.length - 1];    } else {        data.domain = g(j[j.length - 1]);    }}data.url = j[j.length - 1];data.channel = g(j[0]);data.width = screen.width;data.height = screen.height;data.pixelratio = w.devicePixelRatio;data.placementindex = w.ADNW && w.ADNW.Ads ? w.ADNW.Ads.length : 0;data.crossdomain = k;data.safeframe = !!m;var q = {};q.iframe = e.firstElementChild;var r = "https://www.facebook.com/audiencenetwork/web/?sdk=5.3";for (var s in data) {    q[s] = data[s];    if (typeof(data[s]) !== "function") {        r += "&" + s + "=" + encodeURIComponent(data[s]);    }}q.iframe.src = r;q.tagJsInitTime = a;q.rootElement = e;q.events = [];w.addEventListener("message", function(u) {    if (u.source !== q.iframe.contentWindow) {        return;    }    u.data.receivedTimestamp = t();    if (this.sdkEventHandler) {        this.sdkEventHandler(u.data);    } else {        this.events.push(u.data);    }}.bind(q), false);q.tagJsIframeAppendedTime = t();w.ADNW = w.ADNW || {};w.ADNW.Ads = w.ADNW.Ads || [];w.ADNW.Ads.push(q);w.ADNW.init && w.ADNW.init(q);})(window, location, document, Date.now || function() {return +new Date;});</script><script type="text/javascript" src="https://connect.facebook.net/en_US/fbadnw.js" async></script></div></body></html>'),
e.close()}}catch(o){}},this.prefetchDemand=function(e,t,n){T.state=s.IN_PROGRESS,T.correlator=e,T.slotIds=t.divIds.slice(),O[e]={slot:{}},b(t.divIds,function(i,r){if(!i&&r.hasOwnProperty("bids")){var o=r.bids;for(var a in o)if(o.hasOwnProperty(a))for(var d=o[a].length-1;d>=0;d--)o[a][d]||o[a].splice(d,1);for(var l=0;l<t.divIds.length;l++){O[e].slot[t.divIds[l]]={},O[e].slot[t.divIds[l]].timestamp=p.now(),O[e].slot[t.divIds[l]].demand={};var u=f(t.divIds[l]);o.hasOwnProperty(u)&&o[u].length&&(P[o[u][0].bid_id]={adSize:m(u),placementId:u},O[e].slot[t.divIds[l]].demand=I(o[u][0]),o[u].splice(0,1))}T.state=s.READY}else{T.state=s.READY;for(var c=0;c<t.divIds.length;c++)O[e].slot[t.divIds[c]]={},O[e].slot[t.divIds[c]].timestamp=p.now(),O[e].slot[t.divIds[c]].demand={}}n(e);for(var h=0,g=T.callbacks.length;g>h;h++)setTimeout(T.callbacks[h],0)})},this.getDemand=function N(e,t,n){if(T.state===s.IN_PROGRESS){for(var o=u(t),a=!1,d=0,c=o.length;c>d;d++){var f=T.slotIds.indexOf(o[d]);-1!==f&&(T.slotIds.splice(f,1),a=!0)}if(a)return void T.callbacks.push(N.bind(_,e,t,n))}var g={slot:{}};if(T.state===s.READY){for(var y=t.length-1;y>=0;y--){var v=z?l(t[y]):r(t[y]);O[T.correlator].slot.hasOwnProperty(v)&&((S.demandExpiry<0||p.now()-O[T.correlator].slot[v].timestamp<=S.demandExpiry)&&(g.slot[i(t[y])]=O[T.correlator].slot[v],t.splice(y,1)),delete O[T.correlator].slot[v])}if(p.validateNonEmptyObject(O[T.correlator].slot)||(T.state=s.USED),!t.length)return void n(null,g)}b(u(t),function(e,t){if(e)return void n(e);var i=t.bids;for(var r in i)if(i.hasOwnProperty(r))for(var o=h(r),a=0;i[r].length;a++)i[r][0]&&(P[i[r][0].bid_id]={adSize:m(r),placementId:r},g.slot[o[a]]={timestamp:p.now(),demand:I(i[r][0])}),i[r].splice(0,1);n(null,g)})}}var i="FB",r={page:!1,slot:!0},o={time:!0,demand:!1},a={prefetch:!0,demandExpiry:-1},s={NEW:1,IN_PROGRESS:2,READY:3,USED:4},d={FLOOR:1,ROUND:2,CEIL:3},p=window.headertag.Utils;window.headertag.registerPartner(i,t)}),window.headertag.bidderQueue.push(function(){"use strict";function validateTargetingType(e){return"string"==typeof e&&SUPPORTED_TARGETING_TYPES[e]}function getKeys(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function arrayCompare(e,t){var n,i,r={matched:0,success:!1};if(!e||!t)return r;for(n=e.length,i=0;n>i;i++){if(-1===t.indexOf(e[i]))return r;r.matched++}return r.success=!0,r}function retrieveIndexSlot(e,t,n){var i,r,o,a,s,d,p,l={};for(s in t)if(!n[s]){a=t[s],i=0,o=0,r=0;for(d in a)i++,p=arrayCompare(a[d],e[d]),p.success&&(r++,o+=p.matched);i===r&&(l.indexId||(l={matched:o,indexId:s}),o>l.matched&&(l.matched=o,l.indexId=s))}return l.indexId}function mapSlots(e){var t,n,i,r,o,a,s,d,p,l,u=headerTagArgs.gptDivs,c=headerTagArgs.gptMap,h=e.length,f={};if(u)for(p=0;h>p;p++){d=e[p].getSlotElementId();for(i in u)-1!==u[i].indexOf(d)&&(f[i]||(f[i]=[]),f[i].push(d))}if(!u&&c)for(t="CSS1Compat"==window.document.compatMode?window.document.documentElement:window.document.body,n={},r=Utils.isMobile()?"mobile":"desktop",p=0;h>p;p++)for(d=e[p].getSlotElementId(),o=e[p].getSizes(t.clientWidth,t.clientHeight),l=0;l<o.length;l++)a=o[l].getWidth()+"_"+o[l].getHeight(),c[r][a]&&(s=retrieveIndexSlot(e[p].getTargetingMap(),c[r][a],n),s&&(n[s]=!0,f[s]=[d]));return f}function convertSlotDemandObject(e,t){if("slot"===targetingType)return e;var n,i,r={page:{slotIds:[],gCorrelator:t,demand:{}}};for(n in e.slot){r.page.slotIds.push(n),r.page.timestamp?r.page.timestamp=Math.min(r.page.timestamp,e.slot[n].timestamp):r.page.timestamp=e.slot[n].timestamp;for(i in e.slot[n].demand)r.page.demand[i]=r.page.demand[i]||[],r.page.demand[i]=r.page.demand[i].concat(e.slot[n].demand[i])}return r}function parseResults(e,t,n){var i,r,o,a,s,d,p=[],l={slot:{}};if(t){prefetch.demand=JSON.parse(JSON.stringify(headerTagSlots)),prefetch.state=prefetchState.READY,prefetch.analyticsCallback(prefetch.correlator);for(var u=0,c=prefetch.callbacks.length;c>u;u++)setTimeout(prefetch.callbacks[u],0);return void(prefetch.timestamp=Utils.now())}if(n?(i=prefetch.correlator,a=prefetch.demand,d=mapSlots(n)):(i=correlatorTracker[e],a=headerTagSlots,d=ixSlots[i]),(n||dSlots[i]).map(function(e){for(o=e.getSlotElementId(),r=0;r<a.length;r++)s=a[r].split("_"),"undefined"!=typeof d[s[1]]&&-1!==d[s[1]].indexOf(o)&&(n&&p.push(prefetch.demand[r]),l.slot[o]||(l.slot[o]={timestamp:prefetch.timestamp||Utils.now(),demand:{}}),l.slot[o].demand[s[0]]||(l.slot[o].demand[s[0]]=[]),l.slot[o].demand[s[0]].push(s[1]+"_"+s[2]))}),n){var h;for(var f in d)if(d.hasOwnProperty(f)&&-1!==prefetch.slotIds.indexOf(f)){for(r=0;r<d[f].length;r++)l.slot[d[f][r]]||(l.slot[d[f][r]]={timestamp:prefetch.timestamp,demand:{}});h=prefetch.slotIds.indexOf(f),-1!==h&&prefetch.slotIds.splice(h,1)}for(demandStore=l,r=prefetch.demand.length-1;r>=0;r--)-1!==p.indexOf(prefetch.demand[r])&&prefetch.demand.splice(r,1)}else"function"==typeof cb[i]&&(cb[i](null,l),delete cb[i]),delete correlatorTracker[e],delete ixSlots[i],delete dSlots[i]}function escapeCharacter(e){var t=META[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function quote(e){return ESCAPABLE.lastIndex=0,ESCAPABLE.test(e)?e.replace(ESCAPABLE,escapeCharacter):e}function OpenRTBRequest(e,t){if("number"!=typeof e||e%1!==0||0>e)throw"Invalid Site ID";this.siteID=e,this.impressions=[],top===self?(this.sitePage=location.href,this.topframe=1):(this.sitePage=document.referrer,this.topframe=0),"undefined"==typeof indexRequestData.requestCounter?indexRequestData.requestCounter=Math.floor(256*Math.random()):indexRequestData.requestCounter=(indexRequestData.requestCounter+1)%256,this.requestID=String((new Date).getTime()%2592e3*256+indexRequestData.requestCounter+256),correlatorTracker[this.requestID]=t}function cygnus_index_judge(e){headerTagSlots=[];var t,n={},i="^(?:"+headerTagPublicKey+"|"+headerTagPrivateKey+")_(?:T([0-9])_)?(.*)_.*$",r=new RegExp(i),o=[];for(t=0;t<e.length;t++)if(e[t].split("_")[0]!==headerTagPrivateKey){var a=r.exec(e[t]);if("undefined"!=typeof a&&null!==a){var s,d;if(s=a[1],d=a[2],"undefined"!=typeof s&&null!==s||(s=0),n[d]=n[d]||{},"undefined"==typeof n[d].tier||n[d].tier<s){n[d].tier=s;var p=e[t];if(s>0){var l=e[t].split("_"),u=l.shift(),c=l.join("_");l.shift();var h=l.join("_");p=u+"_"+h,indexRequestData.targetIDToBid[h]=indexRequestData.targetIDToBid[c]}n[d].target=p}}}else o.push(e[t]);var f,g=[];for(f in n)n.hasOwnProperty(f)&&g.push(n[f].target);return g.concat(o)}function Partner(e){function t(e,t){if(Utils.isEmpty(e))return t;if(Utils.isEmpty(t))return e;var n,i;for(n in t.slot)if("undefined"==typeof e.slot[n])e.slot[n]=t.slot[n];else{e.slot[n].timestamp=Math.min(e.slot[n].timestamp,t.slot[n].timestamp);for(i in t.slot[n].demand){switch(typeof e.slot[n].demand[i]){case"undefined":e.slot[n].demand[i]=[];break;case"string":e.slot[n].demand[i]=[e.slot[n].demand[i]]}e.slot[n].demand[i]=e.slot[n].demand[i].concat(t.slot[n].demand[i])}}return e}function n(e,t){var n,i,r,o;try{if("undefined"==typeof headerTagArgs||"undefined"==typeof headerTagArgs.siteID||"undefined"==typeof headerTagArgs.slots)return;for("undefined"==typeof indexRequestData&&(indexRequestData={},indexRequestData.impIDToSlotID={},indexRequestData.reqOptions={}),r=new OpenRTBRequest(headerTagArgs.siteID,e),headerTagArgs.url&&"string"==typeof headerTagArgs.url&&r.setPageOverride(headerTagArgs.url),indexRequestData.impIDToSlotID[r.requestID]={},indexRequestData.reqOptions[r.requestID]={},n=0;n<headerTagArgs.slots.length;n++)o=headerTagArgs.slots[n],-1!==t.indexOf(o.id.toString())&&(i=r.addImpression(o.width,o.height,o.bidfloor,o.bidfloorcur,o.id,o.siteID),i&&(indexRequestData.impIDToSlotID[r.requestID][i]=String(o.id)));return"number"==typeof headerTagArgs.targetMode&&(indexRequestData.reqOptions[r.requestID].targetMode=headerTagArgs.targetMode),"function"==typeof headerTagArgs.callback&&(indexRequestData.reqOptions[r.requestID].callback=headerTagArgs.callback),r.sendRequestAsync(e,e===prefetch.correlator)}catch(a){}}var i=this;targetingType=e.targetingType||"slot",headerTagArgs={gptMap:cygnus_index_args.gpt_map,gptDivs:cygnus_index_args.gpt_divs,siteID:cygnus_index_args.siteID,slots:cygnus_index_args.slots,url:cygnus_index_args.url,targetMode:cygnus_index_args.targetMode,callback:cygnus_index_args.callback},cygnus_index_args=void 0;var r=e.targetingType,o=SUPPORTED_ANALYTICS,a=SUPPORTED_OPTIONS,s=SUPPORTED_OPTIONS.demandExpiry?SUPPORTED_OPTIONS.demandExpiry:-1;this.prefetchIndexSlotIds=e.prefetch.info[window.headertag.pagetype].requiredIndexSlots,this.publicKey=e.publicKey||"IOM",this.privateKey=e.privateKey||"IPM",headerTagPrivateKey=this.privateKey,headerTagPublicKey=this.publicKey,this.getPartnerTargetingType=function(){return r},this.getSupportedAnalytics=function(){return o},this.getSupportedOptions=function(){return a},this.getPartnerDemandExpiry=function(){return s},this.setPartnerTargetingType=function(e){return validateTargetingType(e)?(r=e,targetingType=r,!0):!1},this.prefetchDemand=function(e,t,i){prefetch.state=prefetchState.IN_PROGRESS,prefetch.correlator=e,prefetch.gCorrelator=t,prefetch.slotIds=this.prefetchIndexSlotIds.slice(),prefetch.slotIdsInPrefetch=this.prefetchIndexSlotIds.slice(),prefetch.analyticsCallback=i,n(e,this.prefetchIndexSlotIds)},this.getDemand=function d(e,r,o){if("page"===targetingType){var s=r;r=Utils.getSlots()}if(prefetch.state===prefetchState.IN_PROGRESS){for(var p=getKeys(mapSlots(r)),l=!1,u=0,c=p.length;c>u;u++){var h=prefetch.slotIdsInPrefetch.indexOf(p[u]);-1!==h&&(prefetch.slotIdsInPrefetch.splice(h,1),l=!0)}if(l)return void prefetch.callbacks.push(d.bind(i,e,r,o))}var f={};if(prefetch.state===prefetchState.READY&&(prefetch.demand&&prefetch.demand.length>0&&prefetch.slotIds.length&&parseResults(null,!1,r),demandStore.slot)){f.slot=f.slot||{};for(var g=r.length-1;g>=0;g--){var m=r[g].getSlotElementId();if(demandStore.slot.hasOwnProperty(m)){if((a.demandExpiry<0||Utils.now()-demandStore.slot[m].timestamp<=a.demandExpiry)&&(f.slot[m]=demandStore.slot[m],r.splice(g,1)),"page"===targetingType&&s===prefetch.gCorrelator)continue;delete demandStore.slot[m]}}if(prefetch.timestamp&&Utils.now()-prefetch.timestamp>a.demandExpiry&&(prefetch.slotIds=[],prefetch.demand=[],delete prefetch.timestamp),Utils.validateNonEmptyObject(demandStore.slot)||prefetch.slotIds.length||(prefetch.state=prefetchState.USED,delete prefetch.timestamp),!r.length)return void("page"===targetingType?o(null,convertSlotDemandObject(f,s)):o(null,f))}cb[e]=function(e,n){return e?void o(e):void("page"===targetingType?o(null,convertSlotDemandObject(t(f,n),s)):o(null,t(f,n)))},dSlots[e]=r,ixSlots[e]=mapSlots(r);var y=getKeys(ixSlots[e]);return y.length?void n(e,y):o(null,convertSlotDemandObject(f))}}function init(e,t){var n=[];return Utils=window.headertag.Utils,e.hasOwnProperty("targetingType")&&!validateTargetingType(e.targetingType)&&(n.push("targetingType either not set or invalid. Defaulting to using slot level targeting."),e.targetingType="slot"),e.hasOwnProperty("publicKey")&&!Utils.validateNonEmptyString(e.publicKey)&&(n.push("Private key is not a string. Defaulting value to IOM"),e.publicKey="IOM"),e.hasOwnProperty("privateKey")&&!Utils.validateNonEmptyString(e.privateKey)&&(n.push("Private key is not a string. Defaulting value to IPM"),e.privateKey="IPM"),n.length?t(n,new Partner(e)):void t(null,new Partner(e))}var PARTNER_ID="INDX",SUPPORTED_TARGETING_TYPES={page:!0,slot:!0},SUPPORTED_ANALYTICS={time:!0,demand:!0},SUPPORTED_OPTIONS={prefetch:!0,demandExpiry:5e4},prefetchState={NEW:1,IN_PROGRESS:2,READY:3,USED:4},prefetch={state:prefetchState.NEW,demand:null,correlator:null,slotIds:[],callbacks:[]},demandStore={},headerTagArgs,headerTagSlots,headerTagPublicKey,headerTagPrivateKey,cb={},correlatorTracker={},ESCAPABLE=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,META={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},indexRequestData,dSlots={},ixSlots={},targetingType,Utils,demandExpiry=15e3;OpenRTBRequest.prototype.serialize=function(){var e,t,n,i='{"id":'+this.requestID+',"site":{"page":"'+quote(this.sitePage)+'"';for("string"==typeof document.referrer&&(i+=',"ref":"'+quote(document.referrer)+'"'),i+='},"imp":[',n=0;n<this.impressions.length;n++)e=this.impressions[n],t=[],i+='{"id":"'+e.id+'", "banner":{"w":'+e.w+',"h":'+e.h+',"topframe":'+String(this.topframe)+"}","number"==typeof e.bidfloor&&(i+=',"bidfloor":'+e.bidfloor,"string"==typeof e.bidfloorcur&&(i+=',"bidfloorcur":"'+quote(e.bidfloorcur)+'"')),"string"!=typeof e.slotID||e.slotID.match(/^\s*$/)||t.push('"sid":"'+quote(e.slotID)+'"'),"number"==typeof e.siteID&&t.push('"siteID":'+e.siteID),t.length>0&&(i+=',"ext": {'+t.join()+"}"),i+=n+1==this.impressions.length?"}":"},";return i+="]}"},OpenRTBRequest.prototype.addImpression=function(e,t,n,i,r,o){var a={id:String(this.impressions.length+1)};if("number"!=typeof e||1>=e)return null;if("number"!=typeof t||1>=t)return null;if(("string"==typeof r||"number"==typeof r)&&String(r).length<=50&&(a.slotID=String(r)),a.w=e,a.h=t,void 0!==n&&"number"!=typeof n)return null;if("number"==typeof n){if(0>n)return null;if(a.bidfloor=n,void 0!==i&&"string"!=typeof i)return null;a.bidfloorcur=i}if("undefined"!=typeof o){if(!("number"==typeof o&&o%1===0&&o>=0))return null;a.siteID=o}return this.impressions.push(a),a.id},OpenRTBRequest.prototype.sendRequestAsync=function(correlator,isPrefetch){if(0===this.impressions.length)return void(cb.hasOwnProperty(correlator)&&(cb[correlator](null,{}),delete cb[correlator]));var jsonURI=encodeURIComponent(this.serialize()),scriptSrc="https:"===window.location.protocol?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";scriptSrc+="/cygnus?v=7&fn=headertag_parse&s="+this.siteID+"&r="+jsonURI;var xhttp=new XMLHttpRequest;xhttp.withCredentials=!0,xhttp.onreadystatechange=function(){if(4===xhttp.readyState&&200===xhttp.status)try{eval(xhttp.responseText)}catch(e){cb.hasOwnProperty(correlator)&&(cb[correlator]([e.toString()]),delete cb[correlator])}},xhttp.open("GET",scriptSrc,!0),xhttp.send()},window.headertag_parse=function(e){function t(e,t){headerTagSlots.push(e+t),void 0===indexRequestData.targetIDToBid[t]?(indexRequestData.targetIDToBid[t]=[o.adm],indexRequestData.correlator[t]=[n]):(indexRequestData.targetIDToBid[t].push(o.adm),indexRequestData.correlator[t].push(n)),p={},p.impressionID=o.impid,"undefined"!=typeof o.ext.dealid&&(p.dealID=o.ext.dealid),p.bid=o.price,p.slotID=a,p.priceLevel=o.ext.pricelevel,p.target=e+t,c.push(p)}var n;try{if(headerTagSlots=[],e){if("object"!=typeof indexRequestData||"object"!=typeof indexRequestData.impIDToSlotID||"undefined"==typeof indexRequestData.impIDToSlotID[e.id])return;var i,r=0;"object"==typeof indexRequestData.reqOptions&&"object"==typeof indexRequestData.reqOptions[e.id]&&("function"==typeof indexRequestData.reqOptions[e.id].callback&&(i=indexRequestData.reqOptions[e.id].callback),"number"==typeof indexRequestData.reqOptions[e.id].targetMode&&(r=indexRequestData.reqOptions[e.id].targetMode)),indexRequestData.lastRequestID=e.id,n=correlatorTracker[e.id];var o,a,s,d,p,l,u,c=[],h="undefined"==typeof e.seatbid?0:e.seatbid.length;for(l=0;h>l;l++)for(u=0;u<e.seatbid[l].bid.length;u++)o=e.seatbid[l].bid[u],"object"==typeof o.ext&&"string"==typeof o.ext.pricelevel&&"undefined"!=typeof indexRequestData.impIDToSlotID[e.id][o.impid]&&(a=indexRequestData.impIDToSlotID[e.id][o.impid],"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),"undefined"==typeof indexRequestData.targetIDToBid&&(indexRequestData.targetIDToBid={}),"undefined"==typeof indexRequestData.correlator&&(indexRequestData.correlator={}),"string"==typeof o.ext.dealid?(d=headerTagPrivateKey+"_",1===r?(s=a+o.ext.pricelevel,t(d,s)):2===r?(s=a+o.ext.pricelevel,t(d,s),s=a+"_"+o.ext.dealid,t(d,s)):(s=a+"_"+o.ext.dealid,t(d,s))):(d=headerTagPublicKey+"_",s=a+o.ext.pricelevel,t(d,s)));"function"==typeof i&&(0===c.length?i(e.id):i(e.id,c)),headerTagSlots=cygnus_index_judge(headerTagSlots.slice(0))}}catch(f){}"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),parseResults(e.id,correlatorTracker[e.id]===prefetch.correlator)},window.index_render=function(e,t){var n,i,r,o,a,s,d;"undefined"==typeof index_demand&&(window.index_demand={}),d=t.split("_"),n=d[0];try{if(i=indexRequestData.targetIDToBid[t].shift(),null!==i)e.write(i),index_demand[n]=1,delete index_no_demand[n];else{for(r={},j=0;j<headerTagArgs.slots.length;j++)if(headerTagArgs.slot[j].id===n){r.s=headerTagArgs.slot[j].siteID;break}r.hasOwnProperty("s")||(r.s=0),r.u=encodeURIComponent(location.href),r.type="RT",r.r=correlator,r.blank="["+t+"]",o=Utils.objToQueryString(r),a=("https:"===location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+o,s=new XMLHttpRequest,s.open("GET",a,!0),s.send()}}catch(p){}},window.headertag_render=function(e,t,n){var i,r,o=n,a=t.split(",");for(i=0;i<a.length;i++)if(r=a[i].split("_"),r[0]==o)return void window.index_render(e,a[i])},window.headertag.registerPartner(PARTNER_ID,init)}),function(){"use strict";function e(e){return"string"==typeof e&&r[e]}function t(t){function n(e){var t=S;if(e.hasOwnProperty("id")&&(t+="/"+e.id),e.hasOwnProperty("pageId")&&(t+="/"+e.pageId),t+="/"+e.sizeId,t+="/ADTECH;",e.parameters)for(var n in e.parameters)e.parameters.hasOwnProperty(n)&&(t+=n+"="+e.parameters[n]+";");return t}function i(e){if("test"===e)return e;for(var t=Number(e)*w,n=1,i=0,r=h.buckets.length;r>i;i++){var o=h.buckets[i];if(t>=o.range[0]&&t<o.range[1]){n=1/o.granularity;break}i===r-1&&(t=o.range[1],n=1/o.granularity)}return t=100*Math.floor(t*n)/n}function r(e){for(var t=e.getSizes(window.document.documentElement.clientWidth,window.document.documentElement.clientHeight),n=[],i=[],r=0;r<t.length;r++){var o=(t[r],t[r].getWidth()),a=t[r].getHeight(),s=o+"x"+a;if("undefined"!=typeof e.getTargetingMap().pos){for(var d=0;d<e.getTargetingMap().pos.length;d++)s+="_"+e.getTargetingMap().pos[d];n.push(s)}}for(var p in x)if(x.hasOwnProperty(p))for(var l=x[p],r=0;r<n.length;r++)l.indexOf(n[r])>-1&&i.push(p);return i}function l(e,t,n){var r={};try{var o=JSON.parse(t);if(o&&o.hasOwnProperty("nbr"))return null;r.id=e.id;var a=o.seatbid[0].bid[0];r.cpm=i(a.price),r.adm=a.adm,r.divId=n,r.demand={},r.demand[I]=r.id+"_"+r.cpm}catch(s){return null}return r}function u(e,t,i){e="prefetch"===e?t:e;var r={};r.id=t,r.pageId=0,r.sizeId=-1,r.parameters={cmd:"bid",cors:"yes",v:"2"};var o=n(r),a=new XMLHttpRequest;a.withCredentials=!0,a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var t=l(r,a.responseText,e);!t||t.hasOwnProperty("nbr")?i("No demand response."):i(null,t)}else i("No demand response.")},a.open("GET",o,!0),a.send()}var c=this,h=t.roundingBuckets?t.roundingBuckets:{buckets:[{range:[0,20],granularity:.05}]},f=t.targetingType,g=o,m=a,y={state:s.NEW,correlator:null,gcorrelator:null,slotIds:[],callbacks:[]},v={},w=t.revshare?t.revshare:1,I=t.targetingKey?t.targetingKey:"aolbid",b=t.apiVersion,_=t.networkId,x=t.placements,D=d[t.region],S=p.getProtocol()+D+"/pubapi/"+b+"/"+_,T={};this.getPartnerTargetingType=function(){return f},this.getSupportedAnalytics=function(){return g},this.getSupportedOptions=function(){return m},this.getPartnerDemandExpiry=function(){return m.demandExpiry},this.setPartnerTargetingType=function(t){return e(t)?(f=t,!0):!1},this.prefetchDemand=function(e,t,n){function i(t,i){if(r++,i&&(T[i.id]={cpm:i.cpm,adm:i.adm},v[e].slot[i.divId]={},v[e].slot[i.divId].timestamp=p.now(),v[e].slot[i.divId].demand=v[e].slot[i.divId].demand||{},v[e].slot[i.divId].demand[I]=i.demand[I]),o===r){y.state=s.READY,n(e);for(var a=0,d=y.callbacks.length;d>a;a++)setTimeout(y.callbacks[a],0)}}y.state=s.IN_PROGRESS,y.correlator=e,y.slotIds=t.divIds,v[e]={slot:{}};for(var r=0,o=y.slotIds.length,a=0,d=y.slotIds.length;d>a;a++)setTimeout(u.bind(c,"prefetch",y.slotIds[a],i))},this.getDemand=function O(e,t,n){function i(e,t){x++,e||(t&&(T[t.id]={cpm:t.cpm,adm:t.adm},g.slot[t.divId]=g.slot[t.divId]||{},g.slot[t.divId].timestamp=p.now(),g.slot[t.divId].demand=g.slot[t.divId].demand||{},g.slot[t.divId].demand[I]=g.slot[t.divId].demand[I]?g.slot[t.divId].demand[I]+","+t.demand[I]:t.demand[I]),D===x&&n(null,g))}if(y.state===s.IN_PROGRESS){for(var o=!1,a=0,d=t.length;d>a;a++){for(var l=-1,h=r(t[a]),f=0;f<h.length;f++)l=y.slotIds.indexOf(parseInt(h[f])),-1!==l&&y.slotIds.splice(l,1);-1!==l&&(o=!0)}if(o)return void y.callbacks.push(O.bind(c,e,t,n))}var g={slot:{}};if(y.state===s.READY){for(var w=t.length-1;w>=0;w--){var b=t[w].getSlotElementId(),h=r(t[w]);0===h.length&&t.splice(w,1);for(var f=0;f<h.length;f++)v[y.correlator].slot.hasOwnProperty(h[f])&&((m.demandExpiry<0||p.now()-v[y.correlator].slot[h[f]].timestamp<=m.demandExpiry)&&(g.slot[b]?g.slot[b].demand[I]=g.slot[b].demand[I]+","+v[y.correlator].slot[h[f]].demand[I]:g.slot[b]=v[y.correlator].slot[h[f]],t.splice(w,1)),delete v[y.correlator].slot[h[f]])}if(p.validateNonEmptyObject(v[y.correlator].slot)||(y.state=s.USED),!t.length)return void n(null,g)}var _=p.getDivIds(t);if(_.length){for(var x=0,D=0,w=0;w<t.length;w++)D+=r(t[w]).length;for(var w=0;w<t.length;w++)for(var S=r(t[w]),P=0;P<S.length;P++){var E=S[P];setTimeout(u.bind(c,_[w],E,i))}}else n(null,g)},this.render=function(e,t){var n=t.split("_")[0];T.hasOwnProperty(n)&&T[n].hasOwnProperty("adm")&&(e.write(T[n].adm),delete T[n])}}function n(n,i){var r=[];if(n.hasOwnProperty("targetingType")&&e(n.targetingType)||r.push("targetingType either not provided or invalid."),n.hasOwnProperty("namespace")&&!p.validateNonEmptyString(n.namespace)&&r.push("namespace either not a string."),n.hasOwnProperty("region")&&d.hasOwnProperty(n.region)||r.push("region either not provided or invalid."),n.hasOwnProperty("apiVersion")&&p.validateNonEmptyString(n.apiVersion)||r.push("apiVersion either not provided or not a string."),n.hasOwnProperty("networkId")&&p.validateNonEmptyString(n.networkId)||r.push("networkId either not provided or not a string."),n.hasOwnProperty("placements"))for(var o=0,a=n.placements.length;a>o;o++){var s=n.placements[o];if(!p.validateNonEmptyObject(s)){r.push("placement not an array of objects");break}s.hasOwnProperty("id")||s.hasOwnProperty("alias")||r.push("either placement.id or placement.alias must exist."),s.hasOwnProperty("id")&&!p.validateNonEmptyString(s.id)&&r.push("placement.id invalid."),s.hasOwnProperty("alias")&&!p.validateNonEmptyString(s.alias)&&r.push("placement.alias invalid."),s.hasOwnProperty("pageId")&&!p.validateNonEmptyString(s.pageId)&&r.push("placement.pageId invalid."),s.hasOwnProperty("sizeId")&&p.validateNonEmptyString(s.sizeId)||r.push("placement.sizeId invalid.")}else r.push("placements either not provided or not an array.");if(r.length)return void i(r);var l=new t(n);n.namespace=n.namespace||"adtech",window[n.namespace]={render:l.render},i(null,l)}var i="AOL",r={page:!1,slot:!0},o={time:!0,demand:!0},a={prefetch:!0,demandExpiry:3e4},s={NEW:1,IN_PROGRESS:2,READY:3,USED:4},d={eu:"//adserver-eu.adtech.advertising.com",na:"//adserver-us.adtech.advertising.com",asia:"//adserver-as.adtech.advertising.com"},p=window.headertag.Utils;window.headertag.registerPartner(i,n)}(),function(){for(var e,t=window.headertag.Utils,n=window.headertag.bidderQueue;n.length;)(e=t.randomSplice(n))()}();